(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(23),s=n.n(c),i=n(21),o=n(13),u=n(3),l=n(17),j=n(6),d=n(7),h=n(8),b=n(9),f=n(2),p=n.n(f),v=n(14),O=n(4),m=n(0),g=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("div",{className:"headerOne",children:Object(m.jsx)("img",{src:"../assets/logo.png"})}),Object(m.jsxs)("div",{className:"headerTwo",children:[Object(m.jsx)(v.b,{to:"/",children:"Search"}),Object(m.jsx)(v.b,{to:"/favorites",children:"Favorites"})]})]})}}]),n}(a.a.Component),x=g,S=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=S,w=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(m.jsx)("h1",{children:"Loading..."})}}]),n}(a.a.Component),F=w,y=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.musics,n=e.changeFavorite,r=e.isFavorite;return t.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:e.trackName}),Object(m.jsxs)("audio",{src:e.previewUrl,controls:!0,children:[Object(m.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(m.jsx)("code",{children:"audio"}),"."]}),Object(m.jsxs)("label",{htmlFor:e.trackId,children:["Favorita",Object(m.jsx)("input",{type:"checkbox",id:e.trackId,onChange:function(){return n(e,e.trackId)},checked:r(e.trackId)})]})]},e.trackId)}))}}]),n}(a.a.Component),N=y,I="favorite_songs";JSON.parse(localStorage.getItem(I))||localStorage.setItem(I,JSON.stringify([]));var C=function(){return JSON.parse(localStorage.getItem(I))},A=function(e){return localStorage.setItem(I,JSON.stringify(e))},R=function(e){return function(t){setTimeout((function(){t(e)}),500)}},J=function(){return new Promise((function(e){var t=C();R(t)(e)}))},P=function(e){return new Promise((function(t){if(e){var n=C();A([].concat(Object(o.a)(n),[e]))}R("OK")(t)}))},M=function(e){return new Promise((function(t){var n=C();A(n.filter((function(t){return t.trackId!==e.trackId}))),R("OK")(t)}))},U=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).renderMusics=Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){var n,r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match,r=n.params.id,t.next=4,k(r);case 4:a=t.sent,e.setState({musics:Object(o.a)(a),loading:!1});case 6:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),e.getFavoriteSongs=Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:n=t.sent,e.setState({favoriteSongs:Object(o.a)(n),loading:!1});case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),e.addFavoriteSong=function(){var t=Object(u.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(n);case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFavoriteSong=function(){var t=Object(u.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(n);case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isFavorite=function(t){var n=e.state.favoriteSongs;return 0!==n.length&&n.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,n){e.isFavorite(n)&&(e.removeFavoriteSong(t),e.getFavoriteSongs()),e.isFavorite(n)||(e.addFavoriteSong(t),e.getFavoriteSongs())},e.state={musics:[],loading:!0,favoriteSongs:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getFavoriteSongs(),this.renderMusics()}},{key:"render",value:function(){var e=this.state,t=e.musics,n=e.loading;return Object(m.jsxs)("main",{children:[Object(m.jsx)(x,{}),n&&Object(m.jsx)(F,{}),!n&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:t[0].artistName}),Object(m.jsx)("h2",{children:t[0].collectionName}),Object(m.jsx)(N,{musics:t.slice(1),changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})]})]})}}]),n}(a.a.Component),D=U,B=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).getFavoriteSongs=Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:n=t.sent,e.setState({favoriteSongs:Object(o.a)(n),loading:!1});case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),e.addFavoriteSong=function(){var t=Object(u.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(n);case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFavoriteSong=function(){var t=Object(u.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(n);case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isFavorite=function(t){var n=e.state.favoriteSongs;return 0!==n.length&&n.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,n){e.isFavorite(n)&&(e.removeFavoriteSong(t),e.getFavoriteSongs()),e.isFavorite(n)||(e.addFavoriteSong(t),e.getFavoriteSongs())},e.state={loading:!0,favoriteSongs:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getFavoriteSongs()}},{key:"render",value:function(){var e=this.state,t=e.favoriteSongs,n=e.loading;return Object(m.jsxs)("main",{children:[Object(m.jsx)(x,{}),n&&Object(m.jsx)(F,{}),!n&&Object(m.jsx)("div",{children:Object(m.jsx)(N,{musics:t,changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})})]})}}]),n}(a.a.Component),T=B,K=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handlechange,n=e.value,r=e.btnSearchAlbums,a=e.searchResults,c=e.loading,s=e.renderAlbums;return Object(m.jsxs)("main",{children:[Object(m.jsx)(x,{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{className:"searchBox",type:"text",name:"artistSearch",placeholder:"Artist Name",onChange:t,value:n}),Object(m.jsx)("button",{className:"searchBtn",type:"submit",onClick:r,children:"Pesquisar"})]}),Object(m.jsxs)("div",{children:[c&&Object(m.jsx)(F,{}),a&&s()]})]})}}]),n}(a.a.Component),q=K,E=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,r,a,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),r="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(r);case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=E,_=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target,r=n.value,a=n.name;e.setState(Object(l.a)({},a,r))},e.btnSearchAlbums=Object(u.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.artistSearch,e.setState({loading:!0,artistSearch:"",searchResults:!1},Object(u.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(n);case 2:r=t.sent,console.log(r),e.setState({loading:!1,albumsResult:Object(o.a)(r),searchResults:!0,artistSearched:n});case 5:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)}))),e.renderAlbums=function(){var t=e.state,n=t.artistSearched,r=t.albumsResult;return 0===r.length?Object(m.jsx)("h1",{children:"No albums were found"}):Object(m.jsxs)("section",{className:"search-results",children:[Object(m.jsx)("h2",{children:"Album search for ".concat(n,":")}),Object(m.jsx)("div",{className:"albums",children:r.map((function(e){var t=e.artistName,n=e.collectionId,r=e.artworkUrl100,a=e.collectionName;return Object(m.jsxs)("div",{className:"album",children:[Object(m.jsx)(v.b,{to:"/album/".concat(n),children:Object(m.jsx)("img",{src:r.replace("100x100bb.jpg","300x300bb.jpg"),alt:a})}),Object(m.jsx)("h3",{children:t}),Object(m.jsx)("p",{children:a})]},n)}))})]})},e.state={loading:!1,searchResults:!1,artistSearch:"",artistSearched:"",albumsResult:[]},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.artistSearch,a=t.searchResults,c=t.albumsResult;return Object(m.jsx)("main",{children:Object(m.jsxs)(O.c,{children:[Object(m.jsx)(O.a,{path:"/album/:id",component:D}),Object(m.jsx)(O.a,{path:"/favorites",component:T}),Object(m.jsx)(O.a,{path:"/",render:function(t){return Object(m.jsx)(q,Object(i.a)(Object(i.a)({},t),{},{handlechange:e.handleChange,value:r,btnSearchAlbums:e.btnSearchAlbums,searchResults:a,albumsResult:c,loading:n,renderAlbums:e.renderAlbums}))}})]})})}}]),n}(a.a.Component);n(40);s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(v.a,{children:Object(m.jsx)(_,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.9afeb3a2.chunk.js.map