(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),s=a.n(c),i=a(21),o=a(13),u=a(12),l=a(17),j=a(4),h=a(5),b=a(6),d=a(7),v=a(8),O=a.n(v),m=a(14),p=a(2),f=a(0),x=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("header",{children:[Object(f.jsx)("div",{className:"headerOne",children:Object(f.jsx)("img",{src:"".concat("/react-tunes","/logo.png")})}),Object(f.jsxs)("div",{className:"headerTwo",children:[Object(f.jsx)(m.b,{to:"/",children:"Search"}),Object(f.jsx)(m.b,{to:"/favorites",children:"Favorites"})]})]})}}]),a}(r.a.Component),g=x,S=function(){var e=Object(u.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=S,y=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(f.jsx)("h1",{children:"Loading..."})}}]),a}(r.a.Component),F=y,N=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.musics,a=e.changeFavorite,n=e.isFavorite;return t.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:e.trackName}),Object(f.jsxs)("audio",{src:e.previewUrl,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"}),"."]}),Object(f.jsxs)("label",{htmlFor:e.trackId,children:["Favorita",Object(f.jsx)("input",{type:"checkbox",id:e.trackId,onChange:function(){return a(e,e.trackId)},checked:n(e.trackId)})]})]},e.trackId)}))}}]),a}(r.a.Component),w=N,I="favorite_songs",C=function(){return JSON.parse(localStorage.getItem(I))},M=function(e){return localStorage.setItem(I,JSON.stringify(e))},A=function(){var e=C();return null===e?[]:e},R=function(e){if(e){var t=C();M(null===t?[e]:[].concat(Object(o.a)(t),[e]))}},U=function(e){var t=C();M(t.filter((function(t){return t.trackId!==e.trackId})))},D=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).renderMusics=function(){e.setState({loading:!0},Object(u.a)(O.a.mark((function t(){var a,n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match,n=a.params.id,t.next=4,k(n);case 4:r=t.sent,e.setState({musics:Object(o.a)(r),loading:!1});case 6:case"end":return t.stop()}}),t)}))))},e.getSavedMusic=function(){var t=A();e.setState({favoriteSongs:Object(o.a)(t)})},e.isFavorite=function(t){var a=e.state.favoriteSongs;return 0!==a.length&&a.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,a){e.isFavorite(a)&&(U(t),e.getSavedMusic()),e.isFavorite(a)||(R(t),e.getSavedMusic())},e.state={musics:[],loading:!0,favoriteSongs:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getSavedMusic(),this.renderMusics()}},{key:"render",value:function(){var e=this.state,t=e.musics,a=e.loading;return Object(f.jsxs)("main",{children:[Object(f.jsx)(g,{}),a&&Object(f.jsx)(F,{}),!a&&Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:t[0].artistName}),Object(f.jsx)("h2",{children:t[0].collectionName}),Object(f.jsx)(w,{musics:t.slice(1),changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})]})]})}}]),a}(r.a.Component),J=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).getSavedMusic=function(){var t=A();e.setState({favoriteSongs:Object(o.a)(t)})},e.isFavorite=function(t){var a=e.state.favoriteSongs;return 0!==a.length&&a.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,a){e.isFavorite(a)&&(U(t),e.getSavedMusic()),e.isFavorite(a)||(R(t),e.getSavedMusic())},e.state={favoriteSongs:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getSavedMusic()}},{key:"render",value:function(){var e=this.state.favoriteSongs;return Object(f.jsxs)("main",{children:[Object(f.jsx)(g,{}),Object(f.jsx)("div",{children:Object(f.jsx)(w,{musics:e,changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})})]})}}]),a}(r.a.Component),B=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handlechange,a=e.value,n=e.btnSearchAlbums,r=e.searchResults,c=e.loading,s=e.renderAlbums;return Object(f.jsxs)("main",{children:[Object(f.jsx)(g,{}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"searchBox",type:"text",name:"artistSearch",placeholder:"Artist Name",onChange:t,value:a}),Object(f.jsx)("button",{className:"searchBtn",type:"submit",onClick:n,children:"Pesquisar"})]}),Object(f.jsxs)("div",{children:[c&&Object(f.jsx)(F,{}),r&&s()]})]})}}]),a}(r.a.Component),P=B,T=function(){var e=Object(u.a)(O.a.mark((function e(t){var a,n,r,c,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=T,E=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(l.a)({},r,n))},e.btnSearchAlbums=Object(u.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state.artistSearch,e.setState({loading:!0,artistSearch:"",searchResults:!1},Object(u.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(a);case 2:n=t.sent,e.setState({loading:!1,albumsResult:Object(o.a)(n),searchResults:!0,artistSearched:a});case 4:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)}))),e.renderAlbums=function(){var t=e.state,a=t.artistSearched,n=t.albumsResult;return 0===n.length?Object(f.jsx)("h1",{children:"No albums were found"}):Object(f.jsxs)("section",{className:"search-results",children:[Object(f.jsx)("h2",{children:"Album search for ".concat(a,":")}),Object(f.jsx)("div",{className:"albums",children:n.map((function(e){var t=e.artistName,a=e.collectionId,n=e.artworkUrl100,r=e.collectionName;return Object(f.jsxs)("div",{className:"album",children:[Object(f.jsx)(m.b,{to:"/album/".concat(a),children:Object(f.jsx)("img",{src:n.replace("100x100bb.jpg","300x300bb.jpg"),alt:r})}),Object(f.jsx)("h3",{children:t}),Object(f.jsx)("p",{children:r})]},a)}))})]})},e.state={loading:!1,searchResults:!1,artistSearch:"",artistSearched:"",albumsResult:[]},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.artistSearch,r=t.searchResults,c=t.albumsResult;return Object(f.jsx)("main",{children:Object(f.jsxs)(p.c,{children:[Object(f.jsx)(p.a,{path:"/album/:id",component:D}),Object(f.jsx)(p.a,{path:"/favorites",component:J}),Object(f.jsx)(p.a,{path:"/",render:function(t){return Object(f.jsx)(P,Object(i.a)(Object(i.a)({},t),{},{handlechange:e.handleChange,value:n,btnSearchAlbums:e.btnSearchAlbums,searchResults:r,albumsResult:c,loading:a,renderAlbums:e.renderAlbums}))}})]})})}}]),a}(r.a.Component);a(40);s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(m.a,{basename:"/react-tunes",children:Object(f.jsx)(E,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.d3a9addf.chunk.js.map