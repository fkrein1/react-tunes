(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(23),s=n.n(c),i=n(21),o=n(13),u=n(5),l=n(17),j=n(6),h=n(7),b=n(8),d=n(9),v=n(2),p=n.n(v),f=n(14),O=n(3),m=n(0),x=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("div",{className:"headerOne",children:Object(m.jsx)("img",{src:"".concat("/react-tunes","/logo.png")})}),Object(m.jsxs)("div",{className:"headerTwo",children:[Object(m.jsx)(f.b,{to:"/",children:"Search"}),Object(m.jsx)(f.b,{to:"/favorites",children:"Favorites"})]})]})}}]),n}(r.a.Component),g=x,S=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=S,w=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(m.jsx)("h1",{children:"Loading..."})}}]),n}(r.a.Component),F=w,y=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.musics,n=e.changeFavorite,a=e.isFavorite;return t.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:e.trackName}),Object(m.jsxs)("audio",{src:e.previewUrl,controls:!0,children:[Object(m.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(m.jsx)("code",{children:"audio"}),"."]}),Object(m.jsxs)("label",{htmlFor:e.trackId,children:["Favorita",Object(m.jsx)("input",{type:"checkbox",id:e.trackId,onChange:function(){return n(e,e.trackId)},checked:a(e.trackId)})]})]},e.trackId)}))}}]),n}(r.a.Component),N=y,I="favorite_songs",C=function(){return JSON.parse(localStorage.getItem(I))},A=function(e){return localStorage.setItem(I,JSON.stringify(e))},R=function(){return C()},M=function(e){if(e){var t=C();A([].concat(Object(o.a)(t),[e]))}},U=function(e){var t=C();A(t.filter((function(t){return t.trackId!==e.trackId})))},D=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).renderMusics=function(){e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){var n,a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match,a=n.params.id,t.next=4,k(a);case 4:r=t.sent,e.setState({musics:Object(o.a)(r),loading:!1});case 6:case"end":return t.stop()}}),t)}))))},e.getSavedMusic=function(){var t=R();e.setState({favoriteSongs:Object(o.a)(t)})},e.isFavorite=function(t){var n=e.state.favoriteSongs;return 0!==n.length&&n.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,n){e.isFavorite(n)&&(U(t),e.getSavedMusic()),e.isFavorite(n)||(M(t),e.getSavedMusic())},e.state={musics:[],loading:!0,favoriteSongs:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getSavedMusic(),this.renderMusics()}},{key:"render",value:function(){var e=this.state,t=e.musics,n=e.loading;return Object(m.jsxs)("main",{children:[Object(m.jsx)(g,{}),n&&Object(m.jsx)(F,{}),!n&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:t[0].artistName}),Object(m.jsx)("h2",{children:t[0].collectionName}),Object(m.jsx)(N,{musics:t.slice(1),changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})]})]})}}]),n}(r.a.Component),J=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).getFavoriteSongs=Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:n=t.sent,e.setState({favoriteSongs:Object(o.a)(n),loading:!1});case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),e.addFavoriteSong=function(){var t=Object(u.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(n);case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFavoriteSong=function(){var t=Object(u.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(n);case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isFavorite=function(t){var n=e.state.favoriteSongs;return 0!==n.length&&n.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,n){e.isFavorite(n)&&(e.removeFavoriteSong(t),e.getFavoriteSongs()),e.isFavorite(n)||(e.addFavoriteSong(t),e.getFavoriteSongs())},e.state={loading:!0,favoriteSongs:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getFavoriteSongs()}},{key:"render",value:function(){var e=this.state,t=e.favoriteSongs,n=e.loading;return Object(m.jsxs)("main",{children:[Object(m.jsx)(g,{}),n&&Object(m.jsx)(F,{}),!n&&Object(m.jsx)("div",{children:Object(m.jsx)(N,{musics:t,changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})})]})}}]),n}(r.a.Component),B=J,P=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handlechange,n=e.value,a=e.btnSearchAlbums,r=e.searchResults,c=e.loading,s=e.renderAlbums;return Object(m.jsxs)("main",{children:[Object(m.jsx)(g,{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{className:"searchBox",type:"text",name:"artistSearch",placeholder:"Artist Name",onChange:t,value:n}),Object(m.jsx)("button",{className:"searchBtn",type:"submit",onClick:a,children:"Pesquisar"})]}),Object(m.jsxs)("div",{children:[c&&Object(m.jsx)(F,{}),r&&s()]})]})}}]),n}(r.a.Component),T=P,q=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,a,r,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=q,L=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target,a=n.value,r=n.name;e.setState(Object(l.a)({},r,a))},e.btnSearchAlbums=Object(u.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.artistSearch,e.setState({loading:!0,artistSearch:"",searchResults:!1},Object(u.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(n);case 2:a=t.sent,console.log(a),e.setState({loading:!1,albumsResult:Object(o.a)(a),searchResults:!0,artistSearched:n});case 5:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)}))),e.renderAlbums=function(){var t=e.state,n=t.artistSearched,a=t.albumsResult;return 0===a.length?Object(m.jsx)("h1",{children:"No albums were found"}):Object(m.jsxs)("section",{className:"search-results",children:[Object(m.jsx)("h2",{children:"Album search for ".concat(n,":")}),Object(m.jsx)("div",{className:"albums",children:a.map((function(e){var t=e.artistName,n=e.collectionId,a=e.artworkUrl100,r=e.collectionName;return Object(m.jsxs)("div",{className:"album",children:[Object(m.jsx)(f.b,{to:"/album/".concat(n),children:Object(m.jsx)("img",{src:a.replace("100x100bb.jpg","300x300bb.jpg"),alt:r})}),Object(m.jsx)("h3",{children:t}),Object(m.jsx)("p",{children:r})]},n)}))})]})},e.state={loading:!1,searchResults:!1,artistSearch:"",artistSearched:"",albumsResult:[]},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.artistSearch,r=t.searchResults,c=t.albumsResult;return Object(m.jsx)("main",{children:Object(m.jsxs)(O.c,{children:[Object(m.jsx)(O.a,{path:"/album/:id",component:D}),Object(m.jsx)(O.a,{path:"/favorites",component:B}),Object(m.jsx)(O.a,{path:"/",render:function(t){return Object(m.jsx)(T,Object(i.a)(Object(i.a)({},t),{},{handlechange:e.handleChange,value:a,btnSearchAlbums:e.btnSearchAlbums,searchResults:r,albumsResult:c,loading:n,renderAlbums:e.renderAlbums}))}})]})})}}]),n}(r.a.Component);n(40);s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(f.a,{basename:"/react-tunes",children:Object(m.jsx)(L,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.e7f8f656.chunk.js.map