(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(23),s=a.n(n),i=a(21),o=a(13),u=a(12),l=a(17),j=a(4),b=a(5),h=a(6),d=a(7),v=a(8),O=a.n(v),m=a(14),p=a(2),f=a(0),x=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("header",{children:[Object(f.jsx)("div",{className:"headerOne",children:Object(f.jsx)("img",{src:"".concat("/react-tunes","/logo.png")})}),Object(f.jsxs)("div",{className:"headerTwo",children:[Object(f.jsx)(m.b,{to:"/",children:"Search"}),Object(f.jsx)(m.b,{to:"/favorites",children:"Favorites"})]})]})}}]),a}(c.a.Component),g=x,k=function(){var e=Object(u.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=k,y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(f.jsx)("h1",{children:"Loading..."})}}]),a}(c.a.Component),N=y,F=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.musics,a=e.changeFavorite,r=e.isFavorite;return t.map((function(e){return Object(f.jsxs)("div",{class:"music-card",children:[Object(f.jsx)("p",{children:e.trackName}),Object(f.jsxs)("audio",{src:e.previewUrl,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"}),"."]}),Object(f.jsx)("input",{type:"checkbox",className:"heart-checkbox",id:e.trackId,onChange:function(){return a(e,e.trackId)},checked:r(e.trackId)}),Object(f.jsx)("label",{htmlFor:e.trackId,className:"heart-label",children:"\u2764"})]},e.trackId)}))}}]),a}(c.a.Component),I=F,w="favorite_songs",C=function(){return JSON.parse(localStorage.getItem(w))},M=function(e){return localStorage.setItem(w,JSON.stringify(e))},A=function(){var e=C();return null===e?[]:e},R=function(e){if(e){var t=C();M(null===t?[e]:[].concat(Object(o.a)(t),[e]))}},U=function(e){var t=C();M(t.filter((function(t){return t.trackId!==e.trackId})))},D=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).renderMusics=function(){e.setState({loading:!0},Object(u.a)(O.a.mark((function t(){var a,r,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match,r=a.params.id,t.next=4,S(r);case 4:c=t.sent,e.setState({musics:Object(o.a)(c),loading:!1});case 6:case"end":return t.stop()}}),t)}))))},e.getSavedMusic=function(){var t=A();e.setState({favoriteSongs:Object(o.a)(t)})},e.isFavorite=function(t){var a=e.state.favoriteSongs;return 0!==a.length&&a.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,a){e.isFavorite(a)&&(U(t),e.getSavedMusic()),e.isFavorite(a)||(R(t),e.getSavedMusic())},e.state={musics:[],loading:!0,favoriteSongs:[]},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getSavedMusic(),this.renderMusics()}},{key:"render",value:function(){var e=this.state,t=e.musics,a=e.loading;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{}),a&&Object(f.jsx)(N,{}),!a&&Object(f.jsxs)("div",{id:"album-page",children:[Object(f.jsxs)("div",{id:"album-cover",children:[Object(f.jsx)("img",{src:t[0].artworkUrl100.replace("100x100bb.jpg","300x300bb.jpg"),alt:t[0].collectionName}),Object(f.jsx)("h2",{children:t[0].artistName}),Object(f.jsx)("h3",{children:t[0].collectionName})]}),Object(f.jsx)("div",{id:"album-musics",children:Object(f.jsx)(I,{musics:t.slice(1),changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})})]})]})}}]),a}(c.a.Component),J=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.musics,a=e.changeFavorite,r=e.isFavorite;return t.map((function(e){return Object(f.jsxs)("div",{class:"music-card",children:[Object(f.jsx)("img",{src:e.artworkUrl60,class:"mini-cover",alt:e.trackName}),Object(f.jsx)("p",{children:e.trackName}),Object(f.jsxs)("audio",{src:e.previewUrl,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"}),"."]}),Object(f.jsx)("input",{type:"checkbox",className:"heart-checkbox",id:e.trackId,onChange:function(){return a(e,e.trackId)},checked:r(e.trackId)}),Object(f.jsx)("label",{htmlFor:e.trackId,className:"heart-label",children:"\u2764"})]},e.trackId)}))}}]),a}(c.a.Component),B=J,P=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).getSavedMusic=function(){var t=A();e.setState({favoriteSongs:Object(o.a)(t)})},e.isFavorite=function(t){var a=e.state.favoriteSongs;return 0!==a.length&&a.map((function(e){return e.trackId})).includes(t)},e.changeFavorite=function(t,a){e.isFavorite(a)&&(U(t),e.getSavedMusic()),e.isFavorite(a)||(R(t),e.getSavedMusic())},e.state={favoriteSongs:[]},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getSavedMusic()}},{key:"render",value:function(){var e=this.state.favoriteSongs;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{}),Object(f.jsx)("div",{id:"favorites",children:Object(f.jsx)(B,{musics:e,changeFavorite:this.changeFavorite,isFavorite:this.isFavorite})})]})}}]),a}(c.a.Component),T=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handlechange,a=e.value,r=e.btnSearchAlbums,c=e.searchResults,n=e.loading,s=e.renderAlbums;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{}),Object(f.jsxs)("div",{id:"seachSection",children:[Object(f.jsx)("input",{className:"searchBox",type:"text",name:"artistSearch",placeholder:"Artist Name",onChange:t,value:a}),Object(f.jsx)("button",{className:"searchBtn",type:"submit",onClick:r,children:"Pesquisar"})]}),Object(f.jsxs)("div",{children:[n&&Object(f.jsx)(N,{}),c&&s()]})]})}}]),a}(c.a.Component),q=T,E=function(){var e=Object(u.a)(O.a.mark((function e(t){var a,r,c,n,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),r="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(r);case 4:return c=e.sent,e.next=7,c.json();case 7:return n=e.sent,s=n.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=E,_=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,r=a.value,c=a.name;e.setState(Object(l.a)({},c,r))},e.btnSearchAlbums=Object(u.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state.artistSearch,e.setState({loading:!0,artistSearch:"",searchResults:!1},Object(u.a)(O.a.mark((function t(){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(a);case 2:r=t.sent,e.setState({loading:!1,albumsResult:Object(o.a)(r),searchResults:!0,artistSearched:a});case 4:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)}))),e.renderAlbums=function(){var t=e.state,a=t.artistSearched,r=t.albumsResult;return 0===r.length?Object(f.jsx)("h1",{children:"No albums were found"}):Object(f.jsxs)("section",{className:"search-results",children:[Object(f.jsx)("h2",{children:"Album search for ".concat(a,":")}),Object(f.jsx)("div",{className:"albums",children:r.map((function(e){var t=e.artistName,a=e.collectionId,r=e.artworkUrl100,c=e.collectionName;return Object(f.jsxs)("div",{className:"album",children:[Object(f.jsx)(m.b,{to:"/album/".concat(a),children:Object(f.jsx)("img",{src:r.replace("100x100bb.jpg","300x300bb.jpg"),alt:c})}),Object(f.jsx)("h3",{children:t}),Object(f.jsx)("p",{children:c})]},a)}))})]})},e.state={loading:!1,searchResults:!1,artistSearch:"",artistSearched:"",albumsResult:[]},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,r=t.artistSearch,c=t.searchResults,n=t.albumsResult;return Object(f.jsx)("main",{children:Object(f.jsxs)(p.c,{children:[Object(f.jsx)(p.a,{path:"/album/:id",component:D}),Object(f.jsx)(p.a,{path:"/favorites",component:P}),Object(f.jsx)(p.a,{path:"/",render:function(t){return Object(f.jsx)(q,Object(i.a)(Object(i.a)({},t),{},{handlechange:e.handleChange,value:r,btnSearchAlbums:e.btnSearchAlbums,searchResults:c,albumsResult:n,loading:a,renderAlbums:e.renderAlbums}))}})]})})}}]),a}(c.a.Component);a(40);s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(m.a,{basename:"/react-tunes",children:Object(f.jsx)(_,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4bfe6527.chunk.js.map